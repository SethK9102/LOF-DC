# Issues — 2.x (Phase 2: Core Systems)

This file contains full descriptions for all `2.x` issues (Phase 2: Core Systems).

---

## #25 — [2.1] Combat: Create damage calculation system

**Body:**
**⚙️ Phase 2: Core Systems** | Part 1/12

## Description
Create damage calculation system.

## Tasks
- [ ] Implement damage formula
- [ ] Add critical hit chance
- [ ] Add armor mitigation
- [ ] Add random variance

## Definition of Done
- Damage formula implemented
- Tests validating results

---

## #26 — [2.2] Combat: Create CombatManager class

**Body:**
**⚙️ Phase 2: Core Systems** | Part 2/12

## Description
Create CombatManager to orchestrate combat flow.

## Tasks
- [ ] CombatManager class
- [ ] Basic turn loop
- [ ] Action resolution

## Definition of Done
- CombatManager class working
- Basic combat loop functional

---

## #27 — [2.3] Combat: Implement player actions (attack, defend, items)

**Body:**
**⚙️ Phase 2: Core Systems** | Part 3/12

## Description
Implement all player combat actions in the CombatManager.

## Tasks
- [ ] Implement attack action with damage
- [ ] Implement defend action with defense boost
- [ ] Implement item usage in combat
- [ ] Implement run away logic
- [ ] Add action validation

## Definition of Done
- All player actions working
- Actions properly integrated

---

## #28 — [2.4] Combat: Implement enemy AI and behavior

**Body:**
**⚙️ Phase 2: Core Systems** | Part 4/12

## Description
Implement enemy AI and behavior.

## Tasks
- [ ] Create behavior tree or state machine
- [ ] Add targeting logic
- [ ] Add boss behavior

## Definition of Done
- Enemies perform actions
- Boss fights behave uniquely

---

## #29 — [2.5] Combat: Implement special combat cases (boss, run away, rewards)

**Body:**
**⚙️ Phase 2: Core Systems** | Part 5/12

## Description
Implement special combat cases.

## Tasks
- [ ] Boss flow
- [ ] Run away handling
- [ ] Rewards distribution

## Definition of Done
- Special cases handled

---

## #30 — [2.6] Store: Create StoreManager class

**Body:**
**⚙️ Phase 2: Core Systems** | Part 6/12

## Description
Implement StoreManager for all shop interactions.

## Tasks
- [ ] Create StoreManager class
- [ ] Implement buy_item() method
- [ ] Implement sell_item() method
- [ ] Add price checking
- [ ] Add inventory management

## Definition of Done
- StoreManager functional
- Buy/sell working

---

## #31 — [2.7] Store: Create floor-specific inventory data

**Body:**
**⚙️ Phase 2: Core Systems** | Part 7/12

## Description
Set up store inventories for all 8 floors.

## Tasks
- [ ] Create store data structures
- [ ] Populate Floor 1 inventory
- [ ] Populate Floor 2 inventory
- [ ] Populate Floors 3-5 inventory
- [ ] Populate Floors 6-7 inventory
- [ ] Populate Floor 8 inventory

## Definition of Done
- All floor inventories defined
- Items accessible by floor

---

## #32 — [2.8] Store: Implement equipment auto-equip logic

**Body:**
**⚙️ Phase 2: Core Systems** | Part 8/12

## Description
Implement automatic armor equipping and manual weapon selection.

## Tasks
- [ ] Implement armor auto-equip
- [ ] Ask player for weapon equip
- [ ] Update player stats correctly
- [ ] Handle equipment swapping

## Definition of Done
- Auto-equip working for armor
- Weapon selection working

---

## #33 — [2.9] GameManager: Create GameState class

**Body:**
**⚙️ Phase 2: Core Systems** | Part 9/12

## Description
Create a GameState class to capture persistent state for save/load.

## Tasks
- [ ] Implement GameState dataclass
- [ ] Capture player, floor, inventory
- [ ] Serialize/deserialize

## Definition of Done
- GameState serializable
- Save/load uses this class

---

## #34 — [2.10] GameManager: Implement game flow control

**Body:**
**⚙️ Phase 2: Core Systems** | Part 10/12

## Description
Implement main game loop and flow management.

## Tasks
- [ ] Create GameManager class
- [ ] Implement game initialization
- [ ] Implement main game loop
- [ ] Add level progression logic
- [ ] Add floor transitions
- [ ] Add player class selection

## Definition of Done
- Game loop working
- Flow progression correct

---

## #35 — [2.11] GameManager: Implement save/load system

**Body:**
**⚙️ Phase 2: Core Systems** | Part 11/12

## Description
Implement save and load functionality for game state.

## Tasks
- [ ] Create save_game() method
- [ ] Create load_game() method
- [ ] Implement state serialization
- [ ] Create SaveGame data class
- [ ] Add file I/O handling

## Definition of Done
- Save/load working
- State properly persisted

---

## #36 — [2.12] GameManager: Remove all global variables

**Body:**
**⚙️ Phase 2: Core Systems** | Part 12/12

## Description
Refactor GameManager to avoid globals and use dependency injection.

## Tasks
- [ ] Remove global state
- [ ] Provide explicit interfaces
- [ ] Add tests for state isolation

## Definition of Done
- No global variables
- All state in GameState or managers

---
